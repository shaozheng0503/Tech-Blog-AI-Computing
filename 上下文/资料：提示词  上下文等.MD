
宝玉的分享
博客
翻译
Published on 2025-07-02
AI的新技能不是提示词，而是上下文工程
原文：AI的新技能不是提示词，而是上下文工程
最近，“上下文工程”（Context Engineering）这个新词在AI领域越来越受关注。人们的讨论焦点，正从原本的“提示词工程”（Prompt Engineering）转移到一个更广泛、更强大的概念上：上下文工程（Context Engineering）。Tobi Lutke[1] 把它描述为：“提供所有必要的上下文，让大语言模型能够合理地完成任务的一门艺术。” 他是对的。

随着AI智能体的兴起，如何将信息有效地装入其有限的“工作记忆”变得更加关键。如今决定AI智能体成功或失败的关键因素，不再是模型本身，而是你提供给它的上下文质量。大多数智能体的失败，其实不再是模型的失败，而是上下文的失败。

什么是“上下文”？
要理解上下文工程，我们首先得拓宽对“上下文”的定义。它不仅仅是发给大语言模型的一句提示词，而是模型生成回答之前所看到的一切信息。

Context
Context

• 指令 / 系统提示词： 定义模型整体行为的初始指令，可以（也应该）包含示例、规则等。

• 用户提示词： 用户提出的即时任务或问题。

• 当前状态或对话历史（短期记忆）： 用户和模型此前的对话内容，展现当前交流的背景。

• 长期记忆： 跨多次对话积累的持久性知识库，比如用户喜好、历史项目摘要、记住的特定事实。

• 检索的信息（RAG）： 外部的、最新的信息，包括从文档、数据库或API获取的相关内容，用于回答特定问题。

• 可用工具： 模型可以调用的所有函数或内置工具定义（如检查库存、发送邮件等）。

• 结构化输出： 明确定义模型输出的格式，例如JSON格式的对象。

为什么重要？从低端演示到神奇的产品
构建真正有效的AI智能体的秘诀，与其说取决于你写的代码有多复杂，不如说取决于你提供的上下文质量。

创建智能体，真正关键的并非代码或框架，而在于你提供的上下文信息质量。举个例子，假设你让AI助手基于一封简单的邮件来安排会议：

嘿，想确认一下，你明天方便快速碰一下吗？

“低端演示”智能体只有糟糕的上下文，它只看到了用户的请求，尽管代码完全正确——调用大语言模型并获得了回应——但输出却呆板无用：

感谢您的信息。明天我可以，请问你想几点碰面？

“神奇的”智能体则拥有丰富的上下文。它的主要任务并不是决定“怎么”回应，而是去“收集信息”，以让大语言模型顺利实现目标。在调用模型前，你需要扩展上下文，比如包括：

• 你的日历信息（显示明天已满）。

• 你和发件人的历史邮件（决定适当的随意语气）。

• 你的联系人列表（识别对方是关键合作伙伴）。

• 可用的工具，比如发送邀请或邮件。

然后生成如下回应：

嘿，Jim！明天我的日程已经排满了，一整天都是背靠背的会议。周四上午我有空，不知道你是否方便？我已经发了个邀请，看看是否合适。

这种神奇效果，并非来自更聪明的模型或更精巧的算法，而是来自提供了适合任务的正确上下文。这正是上下文工程的意义所在。智能体的失败不再只是模型问题，而是上下文的失败。

从提示词工程到上下文工程
什么是上下文工程呢？如果说“提示词工程”聚焦在精心设计一句完美的指令，那么上下文工程的范畴就更加宽广。我们可以简单地定义它：

上下文工程是一门设计和构建动态系统的学科，能够在正确的时间，以正确的格式，为大语言模型提供恰当的信息和工具，使其能够完成任务。

上下文工程的特点包括：

• 它是个系统，而不是一句话： 上下文并不仅仅是一条静态的提示词模板，而是在模型调用之前运行的完整系统的输出。

• 动态生成： 根据即时任务需求动态生成。例如，某个请求可能需要日历数据，而另一个请求可能需要邮件内容或网络搜索结果。

• 提供正确的信息和工具，恰逢其时： 它的核心职责是确保模型不会遗漏关键细节（输入错误，输出必然错误）。这意味着只在需要时提供有用的知识（信息）和功能（工具）。

• 格式的重要性： 信息的呈现方式至关重要。清晰简洁的摘要好于杂乱无序的数据堆砌；明确的工具结构优于模糊的指令。

总结
构建强大且可靠的AI智能体，正逐渐不再是寻找魔法般的提示词或依赖模型更新，而变为如何高效地进行上下文工程。这要求你深入理解业务场景，清晰定义预期的输出，并妥善组织所有必要的信息，让大语言模型能顺利“完成任务”。

致谢
本文基于深入的人工研究与分析，并参考以下优秀的资料：

• Tobi Lutke的推文[2]

• Karpathy的推文[3]

• The rise of "context engineering"[4]

• Own your context window[5]

• Simon Willison的Context Engineering文章[6]

• Context Engineering for Agents[7]

原文：The New Skill in AI is Not Prompting, It's Context Engineering[8]

引用链接
[1] Tobi Lutke: https://x.com/tobi/status/1935533422589399127
[2] Tobi Lutke的推文: https://x.com/tobi/status/1935533422589399127
[3] Karpathy的推文: https://x.com/karpathy/status/1937902205765607626
[4] The rise of "context engineering": https://blog.langchain.com/the-rise-of-context-engineering/
[5] Own your context window: https://github.com/humanlayer/12-factor-agents/blob/main/content/factor-03-own-your-context-window.md
[6] Simon Willison的Context Engineering文章: https://simonwillison.net/2025/Jun/27/context-engineering/
[7] Context Engineering for Agents: https://rlancemartin.github.io/2025/06/23/context_engineering/
[8] The New Skill in AI is Not Prompting, It's Context Engineering: https://www.philschmid.de/context-engineering

 

See all posts
Built by 宝玉. RSS . 本站原创内容，独家授权赛博禅心公众号发布。

Toggle theme




宝玉的分享
博客
翻译
Published on 2025-07-02
一文看懂“提示词” vs “提示词工程” vs “上下文工程”
很多人分不清楚什么是“提示词”（Prompt），什么是“提示词工程”（Prompt Engineering），现在还又多了一个概念叫“上下文工程”（Context Engineering），这又和“提示词工程”什么区别？


什么是提示词（Prompt）？
提示词很好理解，就是给 AI 模型的输入文本，就是你直接向模型输入的问题或指令。 比如你让 ChatGPT 总结一段文本、调用模型 API 传入提示词去翻译一篇文章等等。

提示词是一段文本，有点像代码。

什么是提示词工程（Prompt Engineering）？
提示词工程是一个过程，系统化地设计、测试、优化提示词的过程。

就像软件工程，我们为了完成某个需求，要有一套科学的方法来帮助完成软件开发的过程，有方法论（比如敏捷开发），要使用工具，要保证质量，不断迭代，最终交付软件，或者说代码。

举个例子
比如我们要有个提示词帮助翻译英文文章到中文。

普通人都可以写：

“请把下面的英文内容翻译为中文：”

这就是一段提示词。

但是你会发现虽然能翻译，但是似乎翻译效果不够好，于是你开始想办法优化，让 AI 扮演一个英文翻译到中文的专家，发现似乎有点效果。

但还是翻译有点生硬，然后你看有人介绍了 CoT（思维链，Chain of Though），于是尝试在提示词中让 AI 去先直译再意译，但你也不知道这样的改动是不是真的有用，于是你找了10篇文章，分别用加了 CoT 和没加 CoT 的文章，去用相同的模型去翻译，然后找了几个人，在不告诉他们使用什么方法翻译的情况下让他们评估好坏，结果绝大部分都认为加了 CoT 的效果更好，那么你就明白了，原来加了 CoT 对翻译是有效果的。

于是你受到鼓舞，即然 CoT 有效果，那么我在直译、意译的基础上，继续增加一个 AI 对直译结果的评估，再去意译，甚至再多加几步是不是效果更好？再继续改进提示词，拿着之前的测试集去评估测试，果然测试效果更好，但是也带来新的问题，Token 消耗更多，时间更长，还可能会偏离原意。CoT 也并不见得步骤越多越好。

再后来推理模型发布了，你发现模型自己会 CoT 了，语言能力也更强了，原来繁琐的一步步翻译似乎没有必要，于是进一步优化，发现只要在提示词中让模型“用中文重写”就可以达到很好的翻译效果，测试集评估结果也是正面的。

这整个对翻译提示词“设计”、“测试”、“优化”的过程就是提示工程。 最终通过这样的过程，产生出一个版本一个版本的提示词。

再精炼浓缩一下：提示词工程是产生提示词的过程。

什么是上下文工程（Context Engineering）？
要理解上下文工程，先得搞清楚什么是“上下文”（Context）？

“上下文”不仅仅是发给大语言模型的一句提示词，而是模型生成回答之前所看到的一切信息，这些信息包括系统提示词、用户输入的问题、当前对话的历史消息、系统对你的历史记忆、工具返回的信息等等。

另外上下文窗口不是无限的，每个模型都对上下文的长度有限制，通常上下文内容多了会影响性能，所以控制好发送给 AI 的上下文很重要，既不能遗漏，又不能什么都放进去要控制体积。

举个例子，你跟 ChatGPT 说： “今天都有什么重要的 AI 新闻？”

看起来只是一句话，但是对于大模型来说，初始的上下文有这些：

系统提示词：“你是个有用的助手，总是帮用户解决问题”

用户输入：“今天都有什么重要的 AI 新闻？”

可用工具：“日期工具、搜索工具、网页抓取工具”

长期记忆：“用户主要使用中文”

历史会话消息：无

工具返回信息：无

这些上下文不足以让 AI 回答你的问题，于是它需要自己去调用工具找齐上下文：

根据日期工具获取到今天的日期（大模型自己不知道今天是几号）

根据今天的日期去调用搜索工具检索 AI 新闻

调用完工具后，现在 AI 的信息完整了：

系统提示词：“你是个有用的助手，总是帮用户解决问题”

用户输入：“今天都有什么重要的 AI 新闻？”

可用工具：“日期工具、搜索工具、网页抓取工具”

长期记忆：“用户主要使用中文”

历史会话消息：无

工具返回信息：

2025-7-1

Hollywood Confronts AI Copyright Chaos in Washington, Courts

Mark Zuckerberg Announces New Meta ‘Superintelligence Labs’ Unit

现在信息够了，考虑用户偏好中文，最后返回的内容如下：

今天的 AI 新闻有：

好莱坞在华盛顿和法院直面人工智能版权混乱

马克·扎克伯格宣布成立新的“超级智能实验室”部门 马克·扎克伯格宣布成立新的“超级智能实验室”部门

假如用户再追问一句： “帮我返回第二条新闻的详情”

那么模型要从历史会话里面，找到第二条新闻的链接，再去调用网页抓取工具，把新闻内容抓取下来，根据用户的偏好翻译成中文，最后返回用户中文的新闻内容。

注意看这个构建上下文的过程是完全动态的，并不是按照设计好的工作流去收集上下文，而是模型自己根据当前上下文状态去自主动态的调用工具收集上下文，并且不同的任务需要调用的工具也不一样。


这其实也就是现在 AI Agent 的工作原理：能分辨是否已经收集够了完成任务必要的上下文，能自主决定是不是需要借助工具或者对话来补齐上下文。


上下文工程的概念也正是在 AI Agent 爆发的背景下诞生的。原来单纯靠提示词工程已经无法满足 AI Agent 产品的需求了，AI Agent 需要的更多的是为系统设计好工具、定义好工具和模型之间交互的数据格式、有效组织上下文信息提供给模型（内容长了要不要压缩、怎么压缩）等等。

上下文工程（Context Engineering），就是一门为 AI 设计和构建动态上下文的学科，为大语言模型提供恰当的信息和工具，帮助模型高效完成任务。

“上下文工程”指的是一种精妙而复杂的技术：你要精准地将上下文窗口填充上恰到好处的信息，让模型能准确地迈出下一步。
这是一门科学，也是门艺术。

说它是科学，因为你要把任务描述、说明、少量样例（few-shot examples）、检索增强生成（RAG）、各种相关数据（甚至可能是多模态数据）、工具、状态、历史信息等全部巧妙地组合在一起，同时还要考虑如何压缩信息。这就像烹饪一道精致的菜肴，配料太少或搭配不对，模型无法获得足够的信息，性能会变差；配料太多或毫无关联，则会增加成本甚至降低表现。要做好这件事，需要的不仅仅是简单堆叠，更是高度专业化的技巧。

说它是艺术，则是因为操作者还要掌握一种近似“心理学”的直觉，敏锐地洞察 LLM 和人类用户心理之间的微妙互动。

——Andrej Karpathy

最后
分别一句话总结一下


提示词： 发送给 AI 的问题或者指令文本

提示词工程： 系统化地设计、测试、优化提示词的过程。

上下文工程： 为大语言模型提供恰当的上下文、帮助模型高效完成任务的科学和艺术。

如果没理解这些概念也没关系，对于普通人来说，能写提示词就够了，要开发 AI 应用才需要考虑提示词工程去不断优化提示词，要开发动态的 AI 智能体才需要去搞上下文工程为 AI 的上下文窗口填充恰好的信息。

See all posts
Built by 宝玉. RSS . 本站原创内容，独家授权赛博禅心公众号发布。

Toggle theme

